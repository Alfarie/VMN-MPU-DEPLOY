import { createAction, createReducer } from 'redux-act';
import { writeFileSync, existsSync } from 'fs';
import { join, resolve } from 'path';
import { control } from '../device/device-model';
const FILE_PATH = join(resolve(__dirname, '../../../../DB/preset.json'));
const NS = `PRESET`;
export const setPreset = createAction(`${NS}_SET_PRESET`);
const initState = existsSync(FILE_PATH) ?
    require(FILE_PATH) : [
    { data: JSON.parse(JSON.stringify(control)), name: 'Preset 1' },
    { data: JSON.parse(JSON.stringify(control)), name: 'Preset 2' }
];
export default createReducer({
    [setPreset]: ({}, payload) => {
        console.log('payload: ', payload);
        writeFileSync(FILE_PATH, JSON.stringify(payload));
        return payload;
    }
}, initState);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3R5cGVzL3N0b3JlL3ByZXNldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUN2RCxPQUFPLEVBQUMsYUFBYSxFQUFDLFVBQVUsRUFBQyxNQUFNLElBQUksQ0FBQTtBQUMzQyxPQUFPLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBQyxNQUFNLE1BQU0sQ0FBQTtBQUNsQyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sd0JBQXdCLENBQUE7QUFFOUMsTUFBTSxTQUFTLEdBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsNEJBQTRCLENBQUMsQ0FBQyxDQUFDO0FBQzFFLE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQTtBQUNuQixNQUFNLENBQUMsTUFBTSxTQUFTLEdBQU8sWUFBWSxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUU5RCxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUEsQ0FBQztJQUNoQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUEsQ0FBQyxDQUFBO0lBQ2YsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBQztJQUM5RCxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFDO0NBQ2pFLENBQUE7QUFDVCxlQUFlLGFBQWEsQ0FBQztJQUN6QixDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBQyxFQUFFO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2xDLGFBQWEsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2xELE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7Q0FDSixFQUFFLFNBQVMsQ0FBQyxDQUFBIn0=